[app/sources/303276172.Dockerfile]
digraph {
  "sha256:3ba9773650c97f34efb884195214763e5ee80b7bbb32a8d5efbcc78614fbbceb" [label="docker-image://docker.io/microsoft/windowsservercore:latest" shape="ellipse"];
  "sha256:24e23b0b64b394330f47d2be6112f27f3cb9e1062b4add1aedf538b2cfe2890d" [label="powershell -command $ErrorActionPreference = 'Stop';   $ProgressPreference = 'SilentlyContinue';     Function Test-Nano() {     $EditionId = (Get-ItemProperty -Path 'HKLM:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion' -Name 'EditionID').EditionId;     return (($EditionId -eq 'ServerStandardNano') -or ($EditionId -eq 'ServerDataCenterNano') -or ($EditionId -eq 'NanoServer'));   }    Function Download-File([string] $source, [string] $target) {     if (Test-Nano) {       $handler = New-Object System.Net.Http.HttpClientHandler;       $client = New-Object System.Net.Http.HttpClient($handler);       $client.Timeout = New-Object System.TimeSpan(0, 30, 0);       $cancelTokenSource = [System.Threading.CancellationTokenSource]::new();       $responseMsg = $client.GetAsync([System.Uri]::new($source), $cancelTokenSource.Token);       $responseMsg.Wait();       if (!$responseMsg.IsCanceled) {         $response = $responseMsg.Result;         if ($response.IsSuccessStatusCode) {           $downloadedFileStream = [System.IO.FileStream]::new($target, [System.IO.FileMode]::Create, [System.IO.FileAccess]::Write);           $copyStreamOp = $response.Content.CopyToAsync($downloadedFileStream);           $copyStreamOp.Wait();           $downloadedFileStream.Close();           if ($copyStreamOp.Exception -ne $null) { throw $copyStreamOp.Exception }         }       } else {       Throw (\"Failed to download \" + $source)       }    } else {       $webClient = New-Object System.Net.WebClient;       $webClient.DownloadFile($source, $target);     }   }     setx /M PATH $('C:\\git\\bin;C:\\git\\usr\\bin;'+$Env:PATH+';C:\\gcc\\bin;C:\\go\\bin');     Write-Host INFO: Downloading git...;   $location='https://github.com/git-for-windows/git/releases/download/v'+$env:GIT_VERSION+'.windows.1/PortableGit-'+$env:GIT_VERSION+'-64-bit.7z.exe';   Download-File $location C:\\gitsetup.7z.exe;     Write-Host INFO: Downloading go...;   Download-File $('https://golang.org/dl/go'+$Env:GO_VERSION+'.windows-amd64.zip') C:\\go.zip;     Write-Host INFO: Downloading compiler 1 of 3...;   Download-File https://raw.githubusercontent.com/jhowardmsft/docker-tdmgcc/master/gcc.zip C:\\gcc.zip;     Write-Host INFO: Downloading compiler 2 of 3...;   Download-File https://raw.githubusercontent.com/jhowardmsft/docker-tdmgcc/master/runtime.zip C:\\runtime.zip;     Write-Host INFO: Downloading compiler 3 of 3...;   Download-File https://raw.githubusercontent.com/jhowardmsft/docker-tdmgcc/master/binutils.zip C:\\binutils.zip;     Write-Host INFO: Installing PS7Zip package...;   Install-Package PS7Zip -Force | Out-Null;   Write-Host INFO: Importing PS7Zip...;   Import-Module PS7Zip -Force;   New-Item C:\\git -ItemType Directory | Out-Null ;   cd C:\\git;   Write-Host INFO: Extracting git...;   Expand-7Zip C:\\gitsetup.7z.exe | Out-Null;   cd C:\\;     Write-Host INFO: Expanding go...;   Expand-Archive C:\\go.zip -DestinationPath C:\\;     Write-Host INFO: Expanding compiler 1 of 3...;   Expand-Archive C:\\gcc.zip -DestinationPath C:\\gcc -Force;   Write-Host INFO: Expanding compiler 2 of 3...;   Expand-Archive C:\\runtime.zip -DestinationPath C:\\gcc -Force;   Write-Host INFO: Expanding compiler 3 of 3...;   Expand-Archive C:\\binutils.zip -DestinationPath C:\\gcc -Force;     Write-Host INFO: Removing downloaded files...;   Remove-Item C:\\gcc.zip;   Remove-Item C:\\runtime.zip;   Remove-Item C:\\binutils.zip;   Remove-Item C:\\gitsetup.7z.exe;     Write-Host INFO: Creating source directory...;   New-Item -ItemType Directory -Path C:\\go\\src\\github.com\\docker\\docker | Out-Null;     Write-Host INFO: Configuring git core.autocrlf...;   C:\\git\\bin\\git config --global core.autocrlf true;     Write-Host INFO: Completed" shape="box"];
  "sha256:d40e8c4a4ab78ab6a746d484d8bb690e8311cec5b3d305c17aaf23228c77e4f9" [label="mkdir{path=/C:\\go\\src\\github.com\\docker\\docker}" shape="note"];
  "sha256:84e99cca615409d864e3d7446989a408e15b1f053293c859f2364448ae55d61b" [label="local://context" shape="ellipse"];
  "sha256:90b3e31f69f43f6296045ba6d64e7b6996a1c4fa3d489b2a3d159a9efc8c85be" [label="copy{src=/, dest=/C:\\go\\src\\github.com\\docker\\docker/}" shape="note"];
  "sha256:0c92998a7d9ad05ecfe0a446dfabeee111ffe6f3a3370bd3397d413d282e0abe" [label="sha256:0c92998a7d9ad05ecfe0a446dfabeee111ffe6f3a3370bd3397d413d282e0abe" shape="plaintext"];
  "sha256:3ba9773650c97f34efb884195214763e5ee80b7bbb32a8d5efbcc78614fbbceb" -> "sha256:24e23b0b64b394330f47d2be6112f27f3cb9e1062b4add1aedf538b2cfe2890d" [label=""];
  "sha256:24e23b0b64b394330f47d2be6112f27f3cb9e1062b4add1aedf538b2cfe2890d" -> "sha256:d40e8c4a4ab78ab6a746d484d8bb690e8311cec5b3d305c17aaf23228c77e4f9" [label=""];
  "sha256:d40e8c4a4ab78ab6a746d484d8bb690e8311cec5b3d305c17aaf23228c77e4f9" -> "sha256:90b3e31f69f43f6296045ba6d64e7b6996a1c4fa3d489b2a3d159a9efc8c85be" [label=""];
  "sha256:84e99cca615409d864e3d7446989a408e15b1f053293c859f2364448ae55d61b" -> "sha256:90b3e31f69f43f6296045ba6d64e7b6996a1c4fa3d489b2a3d159a9efc8c85be" [label=""];
  "sha256:90b3e31f69f43f6296045ba6d64e7b6996a1c4fa3d489b2a3d159a9efc8c85be" -> "sha256:0c92998a7d9ad05ecfe0a446dfabeee111ffe6f3a3370bd3397d413d282e0abe" [label=""];
}


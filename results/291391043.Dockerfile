[app/sources/291391043.Dockerfile]
digraph {
  "sha256:35971ce6c45ba86545c98df4ff2505f1b3a257755badd26cec5c14daeabe72c5" [label="docker-image://docker.io/umputun/baseimage:app-latest" shape="ellipse"];
  "sha256:81d259562e922a51f09a51905017f50b442809bd2a3a669e01b5397b15fa044c" [label="mkdir{path=/srv}" shape="note"];
  "sha256:54a76b29f4e8a3c2530f3aa37ec0cf7934e01249a165864d00ba69cc17cc04eb" [label="local://context" shape="ellipse"];
  "sha256:d7e49f67358c7abeeb6698863cd2991197a41ffcf8f5bdd7085ee7af4e888083" [label="copy{src=/entrypoint.sh, dest=/entrypoint.sh}" shape="note"];
  "sha256:97eb289d9ca53e0f5133d055643f6b0ba5c7174f741514c23d8ca8c394449f22" [label="copy{src=/backend/scripts/backup.sh, dest=/usr/local/bin/backup}" shape="note"];
  "sha256:36837251453fae1b21b09ce0ceacf16be7c481de84f18a87667ed2ee4427aa79" [label="copy{src=/backend/scripts/restore.sh, dest=/usr/local/bin/restore}" shape="note"];
  "sha256:d359066518feeb3cf3d54d16875688bbc61cfb03e94eb72a6dad8f762d55267f" [label="copy{src=/backend/scripts/import.sh, dest=/usr/local/bin/import}" shape="note"];
  "sha256:6bebb735c564075cfc3786901b39440447cef7622fbe793531bef3da69f63c27" [label="/bin/sh -c chmod +x /entrypoint.sh /usr/local/bin/backup /usr/local/bin/restore /usr/local/bin/import" shape="box"];
  "sha256:7d138d4d70b4c647daa3e099ecd05a8d15c61d28a24135e7fe5f1dbad91d5c4d" [label="docker-image://docker.io/umputun/baseimage:buildgo-latest" shape="ellipse"];
  "sha256:5698704873dfdf0c739d9a2b1b9121a0a5c54ddc5a08a7e3670cd66852d10e39" [label="copy{src=/backend, dest=/build/backend}" shape="note"];
  "sha256:29158e2188d4ed8209cc81092401f2802fd35bc5d4a8c2dc131b7297ff475fd6" [label="copy{src=/.git, dest=/build/.git}" shape="note"];
  "sha256:cc8ca4ee26fe4b08ec7be1249b713c6beea037aea2be6c8366bae48027efffdf" [label="mkdir{path=/build/backend}" shape="note"];
  "sha256:3af18ccfc315426d551edf286c66b586a7f3bda0670d1473bbd2042950da14f4" [label="/bin/sh -c if [ -f .mongo ] ; then export MONGO_TEST=$(cat .mongo) ; fi &&     cd app &&     if [ -z \"$SKIP_BACKEND_TEST\" ] ; then         go test -covermode=count -coverprofile=/profile.cov_tmp ./... &&         cat /profile.cov_tmp | grep -v \"_mock.go\" > /profile.cov ;     else echo \"skip backend test\" ; fi" shape="box"];
  "sha256:f06165482b003d70c1000e5c61a72262812908d8f466f832226f47a9c2617d0a" [label="/bin/sh -c echo \"mongo=${MONGO_TEST}\" >> /etc/hosts" shape="box"];
  "sha256:e5edd843f6bc13fcc9164f2c15ad1afc9efff536820192d108358a71d38441b8" [label="/bin/sh -c if [ -z \"$SKIP_BACKEND_TEST\" ] ; then     if [ -f .mongo ] ; then export MONGO_TEST=$(cat .mongo) ; fi &&         golangci-lint run --out-format=tab --disable-all --tests=false --enable=unconvert         --enable=megacheck --enable=structcheck --enable=gas --enable=gocyclo --enable=dupl --enable=misspell         --enable=unparam --enable=varcheck --enable=deadcode --enable=typecheck         --enable=ineffassign --enable=varcheck ./... ;     else echo \"skip backend linters\" ; fi" shape="box"];
  "sha256:7573a1478df7df28162c1a4ba0a3a9cad84491785de2db2679ed62e84c6fc91b" [label="/bin/sh -c if [ -z \"$COVERALLS_TOKEN\" ] ; then     echo \"coverall not enabled\" ;     else goveralls -coverprofile=/profile.cov -service=travis-ci -repotoken $COVERALLS_TOKEN || echo \"coverall failed!\"; fi" shape="box"];
  "sha256:7120f3cecbb9f0c07adbabba6f1bc47c839345c5034f91120c6518416e81adf2" [label="/bin/sh -c if [ -z \"$DRONE\" ] ; then echo \"runs outside of drone\" && version=\"local\";     else version=${DRONE_TAG}${DRONE_BRANCH}${DRONE_PULL_REQUEST}-${DRONE_COMMIT:0:7}-$(date +%Y%m%d-%H:%M:%S); fi &&     echo \"version=$version\" &&     go build -o remark42 -ldflags \"-X main.revision=${version} -s -w\" ./app" shape="box"];
  "sha256:60ca5d80698751287f576eaebec2866558618271fc411966c9d45b1da9ce12d4" [label="copy{src=/build/backend/remark42, dest=/srv/remark42}" shape="note"];
  "sha256:80c147cceccd21f047146c1036b8b4ea3dad5101f3a11d41975bb9666ca99d57" [label="docker-image://docker.io/library/node:10.11-alpine" shape="ellipse"];
  "sha256:59ba57d2439e69c6e1492df4ae08f49717893a2eb4479bcb315ea5a574d472a0" [label="/bin/sh -c apk add --no-cache --update git" shape="box"];
  "sha256:d98be8983c9307d456d8af9b9d9a3cef71939e9bc629d3c38927d2504a8eb8e7" [label="copy{src=/frontend/package.json, dest=/srv/frontend/package.json}" shape="note"];
  "sha256:18ce2b0978a10d8101b0e1f556d9a582cd8d9cb62f19cbbc128c5d5e5391c086" [label="copy{src=/frontend/package-lock.json, dest=/srv/frontend/package-lock.json}" shape="note"];
  "sha256:ab2ee62ac9d6a657d504bc7d605d81e7c56d42722657b588425c320b5eb93883" [label="/bin/sh -c cd /srv/frontend && CI=true npm ci" shape="box"];
  "sha256:95030708d2de9955c77fa6a74994a82128a2acec0c1c6a2c5d2326f2c93910fd" [label="copy{src=/srv/frontend/node_modules, dest=/srv/frontend/node_modules}" shape="note"];
  "sha256:09ac01acc14b3e704711e354582f5cd715230c1e1eb8ba3ccad746b8c2c59aaf" [label="copy{src=/frontend, dest=/srv/frontend}" shape="note"];
  "sha256:f46627a4375545f9671e8e07e92a34c9cf2732618973cee6398f78f9a9f69abd" [label="/bin/sh -c cd /srv/frontend &&     if [ -z \"$SKIP_FRONTEND_TEST\" ] ; then npx run-p lint test build ;     else echo \"skip frontend tests and lint\" ; npm run build ; fi &&     rm -rf ./node_modules" shape="box"];
  "sha256:0798d31a66c8001356bbcdae42d2be6ca7e6e08a30411a5858ec34caa40b9fa7" [label="copy{src=/srv/frontend/public, dest=/srv/web}" shape="note"];
  "sha256:3ba1c681f2dec65baa631d0d5ef053910d4d222583a119cfbaa8a7bed79b670e" [label="/bin/sh -c chown -R app:app /srv" shape="box"];
  "sha256:41cf2a69f8d06742d993931603b5247dd37f62745cbebc7a0843f1beb96b7db7" [label="/bin/sh -c ln -s /srv/remark42 /usr/bin/remark42" shape="box"];
  "sha256:8d8bfee5704b3ec8688dc8e3b4b8bc546bbdf8667ed9c5725c7b576b39faad2f" [label="sha256:8d8bfee5704b3ec8688dc8e3b4b8bc546bbdf8667ed9c5725c7b576b39faad2f" shape="plaintext"];
  "sha256:35971ce6c45ba86545c98df4ff2505f1b3a257755badd26cec5c14daeabe72c5" -> "sha256:81d259562e922a51f09a51905017f50b442809bd2a3a669e01b5397b15fa044c" [label=""];
  "sha256:81d259562e922a51f09a51905017f50b442809bd2a3a669e01b5397b15fa044c" -> "sha256:d7e49f67358c7abeeb6698863cd2991197a41ffcf8f5bdd7085ee7af4e888083" [label=""];
  "sha256:54a76b29f4e8a3c2530f3aa37ec0cf7934e01249a165864d00ba69cc17cc04eb" -> "sha256:d7e49f67358c7abeeb6698863cd2991197a41ffcf8f5bdd7085ee7af4e888083" [label=""];
  "sha256:d7e49f67358c7abeeb6698863cd2991197a41ffcf8f5bdd7085ee7af4e888083" -> "sha256:97eb289d9ca53e0f5133d055643f6b0ba5c7174f741514c23d8ca8c394449f22" [label=""];
  "sha256:54a76b29f4e8a3c2530f3aa37ec0cf7934e01249a165864d00ba69cc17cc04eb" -> "sha256:97eb289d9ca53e0f5133d055643f6b0ba5c7174f741514c23d8ca8c394449f22" [label=""];
  "sha256:97eb289d9ca53e0f5133d055643f6b0ba5c7174f741514c23d8ca8c394449f22" -> "sha256:36837251453fae1b21b09ce0ceacf16be7c481de84f18a87667ed2ee4427aa79" [label=""];
  "sha256:54a76b29f4e8a3c2530f3aa37ec0cf7934e01249a165864d00ba69cc17cc04eb" -> "sha256:36837251453fae1b21b09ce0ceacf16be7c481de84f18a87667ed2ee4427aa79" [label=""];
  "sha256:36837251453fae1b21b09ce0ceacf16be7c481de84f18a87667ed2ee4427aa79" -> "sha256:d359066518feeb3cf3d54d16875688bbc61cfb03e94eb72a6dad8f762d55267f" [label=""];
  "sha256:54a76b29f4e8a3c2530f3aa37ec0cf7934e01249a165864d00ba69cc17cc04eb" -> "sha256:d359066518feeb3cf3d54d16875688bbc61cfb03e94eb72a6dad8f762d55267f" [label=""];
  "sha256:d359066518feeb3cf3d54d16875688bbc61cfb03e94eb72a6dad8f762d55267f" -> "sha256:6bebb735c564075cfc3786901b39440447cef7622fbe793531bef3da69f63c27" [label=""];
  "sha256:7d138d4d70b4c647daa3e099ecd05a8d15c61d28a24135e7fe5f1dbad91d5c4d" -> "sha256:5698704873dfdf0c739d9a2b1b9121a0a5c54ddc5a08a7e3670cd66852d10e39" [label=""];
  "sha256:54a76b29f4e8a3c2530f3aa37ec0cf7934e01249a165864d00ba69cc17cc04eb" -> "sha256:5698704873dfdf0c739d9a2b1b9121a0a5c54ddc5a08a7e3670cd66852d10e39" [label=""];
  "sha256:5698704873dfdf0c739d9a2b1b9121a0a5c54ddc5a08a7e3670cd66852d10e39" -> "sha256:29158e2188d4ed8209cc81092401f2802fd35bc5d4a8c2dc131b7297ff475fd6" [label=""];
  "sha256:54a76b29f4e8a3c2530f3aa37ec0cf7934e01249a165864d00ba69cc17cc04eb" -> "sha256:29158e2188d4ed8209cc81092401f2802fd35bc5d4a8c2dc131b7297ff475fd6" [label=""];
  "sha256:29158e2188d4ed8209cc81092401f2802fd35bc5d4a8c2dc131b7297ff475fd6" -> "sha256:cc8ca4ee26fe4b08ec7be1249b713c6beea037aea2be6c8366bae48027efffdf" [label=""];
  "sha256:cc8ca4ee26fe4b08ec7be1249b713c6beea037aea2be6c8366bae48027efffdf" -> "sha256:3af18ccfc315426d551edf286c66b586a7f3bda0670d1473bbd2042950da14f4" [label=""];
  "sha256:3af18ccfc315426d551edf286c66b586a7f3bda0670d1473bbd2042950da14f4" -> "sha256:f06165482b003d70c1000e5c61a72262812908d8f466f832226f47a9c2617d0a" [label=""];
  "sha256:f06165482b003d70c1000e5c61a72262812908d8f466f832226f47a9c2617d0a" -> "sha256:e5edd843f6bc13fcc9164f2c15ad1afc9efff536820192d108358a71d38441b8" [label=""];
  "sha256:e5edd843f6bc13fcc9164f2c15ad1afc9efff536820192d108358a71d38441b8" -> "sha256:7573a1478df7df28162c1a4ba0a3a9cad84491785de2db2679ed62e84c6fc91b" [label=""];
  "sha256:7573a1478df7df28162c1a4ba0a3a9cad84491785de2db2679ed62e84c6fc91b" -> "sha256:7120f3cecbb9f0c07adbabba6f1bc47c839345c5034f91120c6518416e81adf2" [label=""];
  "sha256:6bebb735c564075cfc3786901b39440447cef7622fbe793531bef3da69f63c27" -> "sha256:60ca5d80698751287f576eaebec2866558618271fc411966c9d45b1da9ce12d4" [label=""];
  "sha256:7120f3cecbb9f0c07adbabba6f1bc47c839345c5034f91120c6518416e81adf2" -> "sha256:60ca5d80698751287f576eaebec2866558618271fc411966c9d45b1da9ce12d4" [label=""];
  "sha256:80c147cceccd21f047146c1036b8b4ea3dad5101f3a11d41975bb9666ca99d57" -> "sha256:59ba57d2439e69c6e1492df4ae08f49717893a2eb4479bcb315ea5a574d472a0" [label=""];
  "sha256:59ba57d2439e69c6e1492df4ae08f49717893a2eb4479bcb315ea5a574d472a0" -> "sha256:d98be8983c9307d456d8af9b9d9a3cef71939e9bc629d3c38927d2504a8eb8e7" [label=""];
  "sha256:54a76b29f4e8a3c2530f3aa37ec0cf7934e01249a165864d00ba69cc17cc04eb" -> "sha256:d98be8983c9307d456d8af9b9d9a3cef71939e9bc629d3c38927d2504a8eb8e7" [label=""];
  "sha256:d98be8983c9307d456d8af9b9d9a3cef71939e9bc629d3c38927d2504a8eb8e7" -> "sha256:18ce2b0978a10d8101b0e1f556d9a582cd8d9cb62f19cbbc128c5d5e5391c086" [label=""];
  "sha256:54a76b29f4e8a3c2530f3aa37ec0cf7934e01249a165864d00ba69cc17cc04eb" -> "sha256:18ce2b0978a10d8101b0e1f556d9a582cd8d9cb62f19cbbc128c5d5e5391c086" [label=""];
  "sha256:18ce2b0978a10d8101b0e1f556d9a582cd8d9cb62f19cbbc128c5d5e5391c086" -> "sha256:ab2ee62ac9d6a657d504bc7d605d81e7c56d42722657b588425c320b5eb93883" [label=""];
  "sha256:80c147cceccd21f047146c1036b8b4ea3dad5101f3a11d41975bb9666ca99d57" -> "sha256:95030708d2de9955c77fa6a74994a82128a2acec0c1c6a2c5d2326f2c93910fd" [label=""];
  "sha256:ab2ee62ac9d6a657d504bc7d605d81e7c56d42722657b588425c320b5eb93883" -> "sha256:95030708d2de9955c77fa6a74994a82128a2acec0c1c6a2c5d2326f2c93910fd" [label=""];
  "sha256:95030708d2de9955c77fa6a74994a82128a2acec0c1c6a2c5d2326f2c93910fd" -> "sha256:09ac01acc14b3e704711e354582f5cd715230c1e1eb8ba3ccad746b8c2c59aaf" [label=""];
  "sha256:54a76b29f4e8a3c2530f3aa37ec0cf7934e01249a165864d00ba69cc17cc04eb" -> "sha256:09ac01acc14b3e704711e354582f5cd715230c1e1eb8ba3ccad746b8c2c59aaf" [label=""];
  "sha256:09ac01acc14b3e704711e354582f5cd715230c1e1eb8ba3ccad746b8c2c59aaf" -> "sha256:f46627a4375545f9671e8e07e92a34c9cf2732618973cee6398f78f9a9f69abd" [label=""];
  "sha256:60ca5d80698751287f576eaebec2866558618271fc411966c9d45b1da9ce12d4" -> "sha256:0798d31a66c8001356bbcdae42d2be6ca7e6e08a30411a5858ec34caa40b9fa7" [label=""];
  "sha256:f46627a4375545f9671e8e07e92a34c9cf2732618973cee6398f78f9a9f69abd" -> "sha256:0798d31a66c8001356bbcdae42d2be6ca7e6e08a30411a5858ec34caa40b9fa7" [label=""];
  "sha256:0798d31a66c8001356bbcdae42d2be6ca7e6e08a30411a5858ec34caa40b9fa7" -> "sha256:3ba1c681f2dec65baa631d0d5ef053910d4d222583a119cfbaa8a7bed79b670e" [label=""];
  "sha256:3ba1c681f2dec65baa631d0d5ef053910d4d222583a119cfbaa8a7bed79b670e" -> "sha256:41cf2a69f8d06742d993931603b5247dd37f62745cbebc7a0843f1beb96b7db7" [label=""];
  "sha256:41cf2a69f8d06742d993931603b5247dd37f62745cbebc7a0843f1beb96b7db7" -> "sha256:8d8bfee5704b3ec8688dc8e3b4b8bc546bbdf8667ed9c5725c7b576b39faad2f" [label=""];
}


[app/sources/285087909.Dockerfile]
digraph {
  "sha256:28fb47b38fd4f00c15d418bd9167e7521e59cba243b4aa76867ec2c92a125af9" [label="docker-image://docker.io/oznu/s6-node:10.15.1-debian-amd64" shape="ellipse"];
  "sha256:e2dc13063822b469b6ccbeaa2c1abfc3576c18229f49688f756171ecac749c80" [label="/bin/sh -c set -x   && echo \"deb http://ftp.debian.org/debian stretch-backports main\" >> /etc/apt/sources.list   && apt-get update   && mkdir -p /usr/share/man/man1 /usr/share/man/man7   && mkdir -p /usr/share/man/man7   && apt-get install -y build-essential rabbitmq-server redis-server     postgresql-9.6 postgresql-contrib-9.6 postgresql-client-9.6 libpq-dev     gzip bash vim openssl libcap-dev dumb-init sudo gettext zlibc zlib1g zlib1g-dev     iproute2 netcat wget libpcre3 libpcre3-dev libssl-dev   && apt-get install -y certbot -t stretch-backports" shape="box"];
  "sha256:568f28481ee20815b0d51022f001452154e248758b0a8ca03d30c7dba54c7db8" [label="/bin/sh -c mkdir -p /home/app/unms" shape="box"];
  "sha256:4120df6543fa781674b457803f9b99d71f8644bdcbdb859be097998efe2741a7" [label="mkdir{path=/home/app/unms}" shape="note"];
  "sha256:b2747016b20a818edf635f730125ba0c842d9f6d9ac61d7346fe0fcf816c6012" [label="docker-image://docker.io/ubnt/unms:0.13.3" shape="ellipse"];
  "sha256:f70bb39a169fe6e46de8901b4d667e917339805c4ec1910568e20e020b429508" [label="copy{src=/home/app/unms, dest=/home/app/unms}" shape="note"];
  "sha256:7dabb50b7343473eba2f8799c79f68d9256367883086f8588ff8b665e195d370" [label="/bin/sh -c rm -rf node_modules     && JOBS=$(nproc) npm install sharp@latest     && JOBS=$(nproc) npm install --production     && mkdir -p -m 777 \"$HOME/unms/public/site-images\"     && mkdir -p -m 777 \"$HOME/unms/data/config-backups\"     && mkdir -p -m 777 \"$HOME/unms/data/unms-backups\"     && mkdir -p -m 777 \"$HOME/unms/data/import\"" shape="box"];
  "sha256:23a4d6f06fc7e5830bb10d03b4135b37657d0bad99e2d3e074816dbcb255d2fb" [label="copy{src=/usr/local/bin/docker-entrypoint.sh, dest=/usr/local/bin/docker-entrypoint.sh}" shape="note"];
  "sha256:e6ac974216a407afbf770e8524d8e04f66ce38dfe245113c9623b9b39a7e83e8" [label="/bin/sh -c chmod +x /usr/local/bin/docker-entrypoint.sh" shape="box"];
  "sha256:510914eb6f2a707779fc3e2d3c0748281b9e720270e3172b578e9ba7f820469e" [label="/bin/sh -c mkdir -p /home/app/netflow" shape="box"];
  "sha256:ceb8906fc423b8f1fa418ae7cc92588511747b570de485688802b84021aff504" [label="docker-image://docker.io/ubnt/unms-netflow:0.13.3" shape="ellipse"];
  "sha256:9b8aca034b5e9c8bf930c65c6ca9e9f96eccc8a3ff9d02ddb8a8325e957bd032" [label="copy{src=/home/app, dest=/home/app/netflow}" shape="note"];
  "sha256:4ff088960399a7ec9b9bf74be97465bd37ce9014a00fa195db2b01ba2ed44fdc" [label="/bin/sh -c cd /home/app/netflow   && rm -rf node_modules   && JOBS=$(nproc) npm install --production" shape="box"];
  "sha256:fb566cee657118a8f91c0649403640844087226ebdc75c8e556a3776fa901462" [label="/bin/sh -c set -x     && mkdir -p /tmp/src && cd /tmp/src     && wget -q http://nginx.org/download/${NGINX_VERSION}.tar.gz -O nginx.tar.gz     && wget -q https://github.com/openresty/lua-nginx-module/archive/v${LUA_NGINX_VERSION}.tar.gz -O lua-nginx-module.tar.gz     && wget -q https://github.com/simpl/ngx_devel_kit/archive/v0.3.0.tar.gz -O ndk.tar.gz     && wget -q http://luajit.org/download/LuaJIT-${LUAJIT_VERSION}.tar.gz -O luajit.tar.gz     && tar -zxvf lua-nginx-module.tar.gz     && tar -zxvf ndk.tar.gz     && tar -zxvf luajit.tar.gz     && tar -zxvf nginx.tar.gz     && cd /tmp/src/LuaJIT-${LUAJIT_VERSION} && make amalg PREFIX='/usr' && make install PREFIX='/usr'     && export LUAJIT_LIB=/usr/lib/libluajit-5.1.so && export LUAJIT_INC=/usr/include/luajit-2.1     && cd /tmp/src/${NGINX_VERSION} && ./configure         --with-cc-opt='-g -O2 -fPIE -fstack-protector-strong -Wformat -Werror=format-security -fPIC -Wdate-time -D_FORTIFY_SOURCE=2'         --with-ld-opt='-Wl,-Bsymbolic-functions -fPIE -pie -Wl,-z,relro -Wl,-z,now -fPIC'         --with-pcre-jit         --with-threads         --add-module=/tmp/src/lua-nginx-module-${LUA_NGINX_VERSION}         --add-module=/tmp/src/ngx_devel_kit-0.3.0         --with-http_ssl_module         --with-http_realip_module         --with-http_gzip_static_module         --with-http_secure_link_module         --without-mail_pop3_module         --without-mail_imap_module         --without-http_upstream_ip_hash_module         --without-http_memcached_module         --without-http_auth_basic_module         --without-http_userid_module         --without-http_fastcgi_module         --without-http_uwsgi_module         --without-http_scgi_module         --prefix=/var/lib/nginx         --sbin-path=/usr/sbin/nginx         --conf-path=/etc/nginx/nginx.conf         --http-log-path=/dev/stdout         --error-log-path=/dev/stderr         --lock-path=/tmp/nginx.lock         --pid-path=/tmp/nginx.pid         --http-client-body-temp-path=/tmp/body         --http-proxy-temp-path=/tmp/proxy     && make -j $(nproc)     && make install     && rm /usr/bin/luajit-${LUAJIT_VERSION}     && rm -rf /tmp/src     && rm -rf /var/cache/apk/*     && echo \"unms ALL=(ALL) NOPASSWD: /usr/sbin/nginx -s *\" >> /etc/sudoers     && echo \"unms ALL=(ALL) NOPASSWD:SETENV: /copy-user-certs.sh reload\" >> /etc/sudoers" shape="box"];
  "sha256:e6b5998f5e8434846bb05a07121b53ae0521d65be3cbf895f45775c0172aad31" [label="https://github.com/Ubiquiti-App/UNMS/archive/v0.13.0.tar.gz" shape="ellipse"];
  "sha256:ba39a6e34998273d427d89029e593f140e4543672a73804a1916c8fcac1d15b6" [label="copy{src=/v0.13.0.tar.gz, dest=/tmp/unms.tar.gz}" shape="note"];
  "sha256:1484b8f831127de3b429ff44434fd417ffb5cb0b0d884b44257463ab7d55cc45" [label="/bin/sh -c cd /tmp     && tar -xzf unms.tar.gz     && cd UNMS-*/src/nginx     && cp entrypoint.sh refresh-certificate.sh fill-template.sh openssl.cnf *.conf.template /     && mkdir -p /www/public     && cp -R public /www/     && chmod +x /entrypoint.sh /fill-template.sh /refresh-certificate.sh" shape="box"];
  "sha256:78a8f6d56f55a68fc97457dec87b64432b569d5839382e94fd67199a676a98b9" [label="/bin/sh -c sed -i \"s#/bin/sh#/bin/bash#g\" /entrypoint.sh   && sed -i \"s#adduser -D#adduser --disabled-password --gecos \\\"\\\"#g\" /entrypoint.sh" shape="box"];
  "sha256:f97a1c4bde458b5182d69e6dc4788f4eea454a32dfc24e01cc2c5a9fe06788f0" [label="local://context" shape="ellipse"];
  "sha256:73445399808541b9c3863d7193429af3b4eafa12e451ceda489797cb883de2dd" [label="copy{src=/root, dest=/}" shape="note"];
  "sha256:cebce6ef4e17ceb9d3b9c23536d83797dc8cfc00d92deeaec013dfa475bd1c92" [label="sha256:cebce6ef4e17ceb9d3b9c23536d83797dc8cfc00d92deeaec013dfa475bd1c92" shape="plaintext"];
  "sha256:28fb47b38fd4f00c15d418bd9167e7521e59cba243b4aa76867ec2c92a125af9" -> "sha256:e2dc13063822b469b6ccbeaa2c1abfc3576c18229f49688f756171ecac749c80" [label=""];
  "sha256:e2dc13063822b469b6ccbeaa2c1abfc3576c18229f49688f756171ecac749c80" -> "sha256:568f28481ee20815b0d51022f001452154e248758b0a8ca03d30c7dba54c7db8" [label=""];
  "sha256:568f28481ee20815b0d51022f001452154e248758b0a8ca03d30c7dba54c7db8" -> "sha256:4120df6543fa781674b457803f9b99d71f8644bdcbdb859be097998efe2741a7" [label=""];
  "sha256:4120df6543fa781674b457803f9b99d71f8644bdcbdb859be097998efe2741a7" -> "sha256:f70bb39a169fe6e46de8901b4d667e917339805c4ec1910568e20e020b429508" [label=""];
  "sha256:b2747016b20a818edf635f730125ba0c842d9f6d9ac61d7346fe0fcf816c6012" -> "sha256:f70bb39a169fe6e46de8901b4d667e917339805c4ec1910568e20e020b429508" [label=""];
  "sha256:f70bb39a169fe6e46de8901b4d667e917339805c4ec1910568e20e020b429508" -> "sha256:7dabb50b7343473eba2f8799c79f68d9256367883086f8588ff8b665e195d370" [label=""];
  "sha256:7dabb50b7343473eba2f8799c79f68d9256367883086f8588ff8b665e195d370" -> "sha256:23a4d6f06fc7e5830bb10d03b4135b37657d0bad99e2d3e074816dbcb255d2fb" [label=""];
  "sha256:b2747016b20a818edf635f730125ba0c842d9f6d9ac61d7346fe0fcf816c6012" -> "sha256:23a4d6f06fc7e5830bb10d03b4135b37657d0bad99e2d3e074816dbcb255d2fb" [label=""];
  "sha256:23a4d6f06fc7e5830bb10d03b4135b37657d0bad99e2d3e074816dbcb255d2fb" -> "sha256:e6ac974216a407afbf770e8524d8e04f66ce38dfe245113c9623b9b39a7e83e8" [label=""];
  "sha256:e6ac974216a407afbf770e8524d8e04f66ce38dfe245113c9623b9b39a7e83e8" -> "sha256:510914eb6f2a707779fc3e2d3c0748281b9e720270e3172b578e9ba7f820469e" [label=""];
  "sha256:510914eb6f2a707779fc3e2d3c0748281b9e720270e3172b578e9ba7f820469e" -> "sha256:9b8aca034b5e9c8bf930c65c6ca9e9f96eccc8a3ff9d02ddb8a8325e957bd032" [label=""];
  "sha256:ceb8906fc423b8f1fa418ae7cc92588511747b570de485688802b84021aff504" -> "sha256:9b8aca034b5e9c8bf930c65c6ca9e9f96eccc8a3ff9d02ddb8a8325e957bd032" [label=""];
  "sha256:9b8aca034b5e9c8bf930c65c6ca9e9f96eccc8a3ff9d02ddb8a8325e957bd032" -> "sha256:4ff088960399a7ec9b9bf74be97465bd37ce9014a00fa195db2b01ba2ed44fdc" [label=""];
  "sha256:4ff088960399a7ec9b9bf74be97465bd37ce9014a00fa195db2b01ba2ed44fdc" -> "sha256:fb566cee657118a8f91c0649403640844087226ebdc75c8e556a3776fa901462" [label=""];
  "sha256:fb566cee657118a8f91c0649403640844087226ebdc75c8e556a3776fa901462" -> "sha256:ba39a6e34998273d427d89029e593f140e4543672a73804a1916c8fcac1d15b6" [label=""];
  "sha256:e6b5998f5e8434846bb05a07121b53ae0521d65be3cbf895f45775c0172aad31" -> "sha256:ba39a6e34998273d427d89029e593f140e4543672a73804a1916c8fcac1d15b6" [label=""];
  "sha256:ba39a6e34998273d427d89029e593f140e4543672a73804a1916c8fcac1d15b6" -> "sha256:1484b8f831127de3b429ff44434fd417ffb5cb0b0d884b44257463ab7d55cc45" [label=""];
  "sha256:1484b8f831127de3b429ff44434fd417ffb5cb0b0d884b44257463ab7d55cc45" -> "sha256:78a8f6d56f55a68fc97457dec87b64432b569d5839382e94fd67199a676a98b9" [label=""];
  "sha256:78a8f6d56f55a68fc97457dec87b64432b569d5839382e94fd67199a676a98b9" -> "sha256:73445399808541b9c3863d7193429af3b4eafa12e451ceda489797cb883de2dd" [label=""];
  "sha256:f97a1c4bde458b5182d69e6dc4788f4eea454a32dfc24e01cc2c5a9fe06788f0" -> "sha256:73445399808541b9c3863d7193429af3b4eafa12e451ceda489797cb883de2dd" [label=""];
  "sha256:73445399808541b9c3863d7193429af3b4eafa12e451ceda489797cb883de2dd" -> "sha256:cebce6ef4e17ceb9d3b9c23536d83797dc8cfc00d92deeaec013dfa475bd1c92" [label=""];
}


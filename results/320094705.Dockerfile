[app/sources/320094705.Dockerfile]
digraph {
  "sha256:c139e859151268321f8b3d9af4bf0195aab52a1b66880ee4294469151c73bfb9" [label="docker-image://docker.io/library/alpine:3.7" shape="ellipse"];
  "sha256:081ac32dae19cf6fc1ee7c9710ab34e3ecb075b2f1d7e7d3fbd14cef59595945" [label="local://context" shape="ellipse"];
  "sha256:444d7ba4a603c4510f3f8a6f0a335fda992002d2062ad52c73605e3d6da7e0df" [label="copy{src=/rootfs, dest=/}" shape="note"];
  "sha256:2d29d8083ec00cecff9e375303072fb1c11f3e918a1495b3599dd9a10371867d" [label="/bin/sh -c NB_CORES=${BUILD_CORES-$(getconf _NPROCESSORS_CONF)}  && apk -U upgrade  && BUILD_DEPS=\"     linux-headers     libtool     build-base     binutils-gold     pcre-dev     zlib-dev     wget     gnupg     autoconf     gcc     g++     libc-dev     make     pkgconf     curl-dev     ca-certificates     go     cmake     automake     file     jemalloc-dev     patch     re2c     ${CUSTOM_BUILD_PKGS}\"  && apk -U add     ${BUILD_DEPS}     s6     su-exec     curl     jemalloc     libedit     libxml2     libressl     libwebp     gd     git     pcre     zlib     ${CUSTOM_PKGS}  && cd /tmp  && wget http://nginx.org/download/nginx-${NGINX_VER}.tar.gz -O /tmp/nginx-${NGINX_VER}.tar.gz  && wget http://nginx.org/download/nginx-${NGINX_VER}.tar.gz.asc -O /tmp/nginx-${NGINX_VER}.tar.gz.asc  && wget ${PHP_MIRROR}/get/php-${PHP_VER}.tar.gz/from/this/mirror -O /tmp/php-${PHP_VER}.tar.gz  && wget ${PHP_MIRROR}/get/php-${PHP_VER}.tar.gz.asc/from/this/mirror -O /tmp/php-${PHP_VER}.tar.gz.asc  && wget http://ftp.gnu.org/pub/gnu/libiconv/libiconv-${LIBICONV_VERSION}.tar.gz -O /tmp/libiconv-${LIBICONV_VERSION}.tar.gz  && OPENSSL_TARBALL=\"openssl-${OPENSSL_VERSION}.tar.gz\"  && wget https://www.openssl.org/source/${OPENSSL_TARBALL}  && mkdir -p /php/conf.d  && mkdir -p /usr/src  && tar xzf ${OPENSSL_TARBALL} -C /usr/src  && tar xzf /tmp/nginx-${NGINX_VER}.tar.gz -C /usr/src  && tar xzvf /tmp/php-${PHP_VER}.tar.gz -C /usr/src  && tar xzf /tmp/libiconv-${LIBICONV_VERSION}.tar.gz -C /usr/src && cd /usr/src/openssl-${OPENSSL_VERSION} && wget https://raw.githubusercontent.com/cloudflare/sslconfig/master/patches/openssl__1.1.0_chacha20_poly1305.patch && patch -p1 < openssl__1.1.0_chacha20_poly1305.patch && cd /tmp && git clone --recurse-submodules https://github.com/eustas/ngx_brotli --depth=1 && cd ngx_brotli/deps/brotli && mkdir out && cd out && ../configure-cmake && make && make install && cd /tmp && git clone https://github.com/openresty/headers-more-nginx-module --depth=1 && git clone https://github.com/grahamedgecombe/nginx-ct --depth=1  && cd /usr/src/nginx-${NGINX_VER}  && wget https://raw.githubusercontent.com/cloudflare/sslconfig/master/patches/nginx__1.11.5_dynamic_tls_records.patch  && patch -p1 < nginx__1.11.5_dynamic_tls_records.patch  && wget https://raw.githubusercontent.com/kn007/patch/master/nginx_auto_using_PRIORITIZE_CHACHA.patch  && patch -p1 < nginx_auto_using_PRIORITIZE_CHACHA.patch  && wget https://raw.githubusercontent.com/kn007/patch/master/nginx__1.13.10_http2_hpack.patch  && patch -p1 < nginx__1.13.10_http2_hpack.patch  && ./configure  --prefix=/nginx  --sbin-path=/usr/local/sbin/nginx  --with-cc-opt=\"-m64 -march=native -DTCP_FASTOPEN=23 -O3 -fPIE -fstack-protector-strong -fuse-ld=gold --param=ssp-buffer-size=4 -gsplit-dwarf -D_FORTIFY_SOURCE=2 -Wformat -Werror=format-security -Wno-deprecated-declarations\"  --with-ld-opt=\"-lrt -ljemalloc -Wl,-Bsymbolic-functions -Wl,-z,relro\"  --with-openssl-opt='no-async enable-ec_nistp_64_gcc_128 no-shared no-ssl3 no-comp no-idea no-weak-ssl-ciphers -DOPENSSL_NO_HEARTBEATS -O3 -fPIE -fstack-protector-strong -D_FORTIFY_SOURCE=2'  --with-openssl=/usr/src/openssl-${OPENSSL_VERSION}  --http-log-path=/nginx/logs/nginx_access.log  --error-log-path=/nginx/logs/nginx_error.log  --pid-path=/nginx/run/nginx.pid  --lock-path=/nginx/run/nginx.lock  ${NGINX_CONF}  ${NGINX_3RD_PARTY_MODULES}  && make -j ${NB_CORES}  && make install && make clean  && strip -s /usr/local/sbin/nginx  && mkdir -p /tmp/go/bin  && export GOPATH=/tmp/go  && export GOBIN=$GOPATH/bin  && go get github.com/grahamedgecombe/ct-submit  && mv /tmp/go/bin/ct-submit /usr/local/bin/ct-submit  && cd /usr/src/libiconv-${LIBICONV_VERSION}  && ./configure --prefix=/usr/local  && make && make install && libtool --finish /usr/local/lib  && mv /usr/src/php-${PHP_VER} /usr/src/php  && cd /usr/src/php  && ./configure CFLAGS=\"-O3 -fstack-protector-strong\" ${PHP_CONF}  && make -j ${NB_CORES}  && make install  && { find /usr/local/bin /usr/local/sbin -type f -perm +0111 -exec strip --strip-all '{}' + || true; }  && make clean  && cd /tmp  && wget https://raw.githubusercontent.com/Starbix/nginx-amplify-agent/master/packages/install-source.sh  && chmod u+x install-source.sh  && ./install-source.sh  && cd /usr/lib/python2.7/site-packages/nginx_amplify_agent-*-py2.7.egg/amplify/agent/managers  && rm -rf abstract.py && wget https://raw.githubusercontent.com/Starbix/nginx-amplify-agent/master/amplify/agent/managers/abstract.py  && chmod u+x /usr/local/bin/* /etc/s6.d/*/*  && sync  && docker-php-ext-install ${PHP_EXT_LIST}  && apk del ${BUILD_DEPS}  && rm -rf /tmp/* /var/cache/apk/* /usr/src/*  && mkdir -p /nginx/logs /nginx/client_body_temp /nginx/fastcgi_temp /nginx/proxy_temp /nginx/scgi_temp /nginx/uwsgi_temp /nginx/run /php/php-fpm.d /php/logs /php/run /php/session  && chown -R ${UID}:${GID} /nginx/*" shape="box"];
  "sha256:c1274336e898d8dbe78de1ac2802bb2c2a23c9288f1121eb882977e6f0071979" [label="sha256:c1274336e898d8dbe78de1ac2802bb2c2a23c9288f1121eb882977e6f0071979" shape="plaintext"];
  "sha256:c139e859151268321f8b3d9af4bf0195aab52a1b66880ee4294469151c73bfb9" -> "sha256:444d7ba4a603c4510f3f8a6f0a335fda992002d2062ad52c73605e3d6da7e0df" [label=""];
  "sha256:081ac32dae19cf6fc1ee7c9710ab34e3ecb075b2f1d7e7d3fbd14cef59595945" -> "sha256:444d7ba4a603c4510f3f8a6f0a335fda992002d2062ad52c73605e3d6da7e0df" [label=""];
  "sha256:444d7ba4a603c4510f3f8a6f0a335fda992002d2062ad52c73605e3d6da7e0df" -> "sha256:2d29d8083ec00cecff9e375303072fb1c11f3e918a1495b3599dd9a10371867d" [label=""];
  "sha256:2d29d8083ec00cecff9e375303072fb1c11f3e918a1495b3599dd9a10371867d" -> "sha256:c1274336e898d8dbe78de1ac2802bb2c2a23c9288f1121eb882977e6f0071979" [label=""];
}


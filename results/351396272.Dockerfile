[app/sources/351396272.Dockerfile]
digraph {
  "sha256:036c4810cc31f4f23d2cc60e4476dbc3fe7e929d84d0a74739fb2286c2a9f43a" [label="docker-image://docker.io/library/nginx:alpine@sha256:bead42240255ae1485653a956ef41c9e458eb077fcb6dc664cbc3aa9701a05ce" shape="ellipse"];
  "sha256:be4e00434c9a6c23ff551e4ee94d6a41686172d6f8d780686156ca6807daa5f9" [label="/bin/sh -c mkdir /entrypoint;" shape="box"];
  "sha256:e11abc002cff4aaa57c43dec24300ebb77f514bef81a317f001edd2c370e94ba" [label="/bin/sh -c echo '#!/bin/sh'                                                                                          > /entrypoint/primer.sh && \techo '# Fetch the DNS resolver'                                                                            >> /entrypoint/primer.sh && \techo 'RESOLVER=\"$DNS\"'                                                                                     >> /entrypoint/primer.sh && \techo 'if [ -z \"$RESOLVER\" ]; then'                                                                         >> /entrypoint/primer.sh && \techo '    RESOLVER=$(cat /etc/resolv.conf | grep \"nameserver\" | awk \"{print \\$2}\")'                        >> /entrypoint/primer.sh && \techo 'fi'                                                                                                  >> /entrypoint/primer.sh && \techo 'if [ -z \"$DNS_VALID_TIMEOUT\" ]; then'                                                                >> /entrypoint/primer.sh && \techo '    RESOLVER=\"$RESOLVER valid=$DNS_VALID_TIMEOUT\"'                                                   >> /entrypoint/primer.sh && \techo 'fi'                                                                                                  >> /entrypoint/primer.sh && \techo 'echo \"resolver $RESOLVER ;\" > /etc/nginx/resolvers.conf'                                             >> /entrypoint/primer.sh && \techo ''                                                                                                    >> /entrypoint/primer.sh && \techo '# Writes and setup the password'                                                                     >> /entrypoint/primer.sh && \techo 'echo \"${HTPASSWD}\" > /etc/nginx/auth.htpasswd'                                                       >> /entrypoint/primer.sh && \techo ''                                                                                                    >> /entrypoint/primer.sh && \techo '# Goes into the nginx config folder'                                                                 >> /entrypoint/primer.sh && \techo 'cd /etc/nginx/conf.d/'                                                                               >> /entrypoint/primer.sh && \techo ''                                                                                                    >> /entrypoint/primer.sh && \techo '# Setup the server config'                                                                           >> /entrypoint/primer.sh && \techo 'echo \"# http level config\"                                                          > default.conf'  >> /entrypoint/primer.sh && \techo 'echo \"client_max_body_size ${MAX_BODY_SIZE};\"                                       >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"\"                                                                             >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"server {\"                                                                     >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"   listen 80 default_server;\"                                                 >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"   client_max_body_size ${MAX_BODY_SIZE};\"                                    >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"\"                                                                             >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"   location / {\"                                                              >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"      auth_basic            \\\"${AUTH_REALM}\\\";\"                               >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"      auth_basic_user_file  auth.htpasswd;\"                                   >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"\"                                                                             >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"      # Dynamic IP DNS workaround\"                                            >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"      include resolvers.conf;\"                                                >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"      set \\$upstream \\\"${FORWARD_PROT}://${FORWARD_HOST}:${FORWARD_PORT}\\\";\"  >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"\"                                                                             >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"      proxy_pass           \\$upstream;\"                                       >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"      proxy_read_timeout   ${PROXY_READ_TIMEOUT};\"                            >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"      proxy_pass_request_headers on;\"                                         >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"      proxy_set_header     Authorization \\\"\\\";\"                               >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"      proxy_set_header     X-Forwarded-For \\$proxy_add_x_forwarded_for;\"      >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"\"                                                                             >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"      client_max_body_size ${MAX_BODY_SIZE};\"                                 >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"      client_body_buffer_size ${MAX_BUFFER_SIZE};\"                            >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"   }\"                                                                         >> default.conf' >> /entrypoint/primer.sh && \techo 'echo \"}\"                                                                            >> default.conf' >> /entrypoint/primer.sh && \techo ''                                                                                                    >> /entrypoint/primer.sh && \techo '# Goes back to root folder'                                                                          >> /entrypoint/primer.sh && \techo 'cd /'                                                                                                >> /entrypoint/primer.sh && \techo ''                                                                                                    >> /entrypoint/primer.sh && \techo '# Chain the execution commands'                                                                      >> /entrypoint/primer.sh && \techo 'exec \"$@\"'                                                                                           >> /entrypoint/primer.sh && \tchmod +x /entrypoint/primer.sh && \t/entrypoint/primer.sh;" shape="box"];
  "sha256:60d084d7eeaf1994c8f88e8f2e25bb8ca13e946b715e6eaaff2145d573ac8347" [label="sha256:60d084d7eeaf1994c8f88e8f2e25bb8ca13e946b715e6eaaff2145d573ac8347" shape="plaintext"];
  "sha256:036c4810cc31f4f23d2cc60e4476dbc3fe7e929d84d0a74739fb2286c2a9f43a" -> "sha256:be4e00434c9a6c23ff551e4ee94d6a41686172d6f8d780686156ca6807daa5f9" [label=""];
  "sha256:be4e00434c9a6c23ff551e4ee94d6a41686172d6f8d780686156ca6807daa5f9" -> "sha256:e11abc002cff4aaa57c43dec24300ebb77f514bef81a317f001edd2c370e94ba" [label=""];
  "sha256:e11abc002cff4aaa57c43dec24300ebb77f514bef81a317f001edd2c370e94ba" -> "sha256:60d084d7eeaf1994c8f88e8f2e25bb8ca13e946b715e6eaaff2145d573ac8347" [label=""];
}


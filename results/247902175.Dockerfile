[app/sources/247902175.Dockerfile]
digraph {
  "sha256:bf062c07f19cab7122023d3bbb4200ec20f62dc667f5027e7f14c559790c6b4e" [label="local://context" shape="ellipse"];
  "sha256:aa7fb7ca525aa22fb522c7b16051d105e47b0ee9b70b09c38a60b3b07b97ca12" [label="docker-image://docker.io/library/ruby:2.6-slim-stretch" shape="ellipse"];
  "sha256:bc25495b61298a8a845fa859f2e970462e3d07b45e099519cd095c78c12aebd4" [label="/bin/sh -c groupadd -r redmine && useradd -r -g redmine redmine" shape="box"];
  "sha256:384432f5451c37632f6e31c1bc3d925aca708c72cb10b4921b40cbedf6e5c7bc" [label="/bin/sh -c set -eux; apt-get update; apt-get install -y --no-install-recommends ca-certificates wget unzip bzr git mercurial openssh-client subversion gsfonts imagemagick ; rm -rf /var/lib/apt/lists/*" shape="box"];
  "sha256:ff4fa0c93520da8bfd3c53a9cda05b9994f2d873758db992efc4c8e9eb846494" [label="/bin/sh -c set -eux; savedAptMark=\"$(apt-mark showmanual)\"; apt-get update; apt-get install -y --no-install-recommends dirmngr gnupg ; rm -rf /var/lib/apt/lists/*; dpkgArch=\"$(dpkg --print-architecture | awk -F- '{ print $NF }')\"; export GOSU_VERSION='1.11'; wget -O /usr/local/bin/gosu \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$dpkgArch\"; wget -O /usr/local/bin/gosu.asc \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$dpkgArch.asc\"; export GNUPGHOME=\"$(mktemp -d)\"; gpg --batch --keyserver ha.pool.sks-keyservers.net --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4; gpg --batch --verify /usr/local/bin/gosu.asc /usr/local/bin/gosu; gpgconf --kill all; rm -r \"$GNUPGHOME\" /usr/local/bin/gosu.asc; chmod +x /usr/local/bin/gosu; gosu nobody true; export TINI_VERSION='0.18.0'; wget -O /usr/local/bin/tini \"https://github.com/krallin/tini/releases/download/v$TINI_VERSION/tini-$dpkgArch\"; wget -O /usr/local/bin/tini.asc \"https://github.com/krallin/tini/releases/download/v$TINI_VERSION/tini-$dpkgArch.asc\"; export GNUPGHOME=\"$(mktemp -d)\"; gpg --batch --keyserver ha.pool.sks-keyservers.net --recv-keys 6380DC428747F6C393FEACA59A84159D7001A4E5; gpg --batch --verify /usr/local/bin/tini.asc /usr/local/bin/tini; gpgconf --kill all; rm -r \"$GNUPGHOME\" /usr/local/bin/tini.asc; chmod +x /usr/local/bin/tini; tini -h; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false" shape="box"];
  "sha256:122ce384238776675aea878b70957225fe43430143fa7c8962a6a8fc92224842" [label="mkdir{path=/usr/src/redmine}" shape="note"];
  "sha256:5fdf707ef119a755f627e82cf626b699086c99a1dadfefd048c9136975f06ff3" [label="/bin/sh -c set -eux; [ ! -d \"$HOME\" ]; mkdir -p \"$HOME\"; chown redmine:redmine \"$HOME\"; chmod 1777 \"$HOME\"" shape="box"];
  "sha256:bf2a4c01d4cb9bdf1df8a7f7d052728342439e0c17dc2a73353959bb2b133925" [label="/bin/sh -c wget -O redmine.tar.gz \"https://www.redmine.org/releases/redmine-${REDMINE_VERSION}.tar.gz\" && echo \"$REDMINE_DOWNLOAD_MD5 redmine.tar.gz\" | md5sum -c - && tar -xvf redmine.tar.gz --strip-components=1 && rm redmine.tar.gz files/delete.me log/delete.me && mkdir -p log public/plugin_assets sqlite tmp/pdf tmp/pids && chown -R redmine:redmine ./ && echo 'config.logger = Logger.new(STDOUT)' > config/additional_environment.rb && chmod -R ugo=rwX config db sqlite && find log tmp -type d -exec chmod 1777 '{}' +" shape="box"];
  "sha256:bd9dd3a565dd9ca318c0725cf07942d0c648e46380aacef4a8e17ab023b0e65f" [label="/bin/sh -c set -eux; savedAptMark=\"$(apt-mark showmanual)\"; apt-get update; apt-get install -y --no-install-recommends dpkg-dev gcc libmagickcore-dev libmagickwand-dev libmariadbclient-dev libpq-dev libsqlite3-dev make patch libssl1.0-dev ; rm -rf /var/lib/apt/lists/*; wget -O freetds.tar.bz2 'http://www.freetds.org/files/stable/freetds-1.00.91.tar.bz2'; echo '8d71f9f29be0fe0637e443dd3807b3fd *freetds.tar.bz2' | md5sum -c -; mkdir freetds; tar -xf freetds.tar.bz2 -C freetds --strip-components=1; rm freetds.tar.bz2; ( cd freetds && gnuArch=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && ./configure --build=\"$gnuArch\" --enable-silent-rules && make -j \"$(nproc)\" && make -C src install && make -C include install ); rm -rf freetds; gosu redmine bundle config build.tiny_tds --enable-system-freetds; gosu redmine bundle install --without development test; for adapter in mysql2 postgresql sqlserver sqlite3; do echo \"$RAILS_ENV:\" > ./config/database.yml; echo \"  adapter: $adapter\" >> ./config/database.yml; gosu redmine bundle install --without development test; cp Gemfile.lock \"Gemfile.lock.${adapter}\"; done; rm ./config/database.yml; chmod -R ugo=rwX Gemfile.lock \"$GEM_HOME\"; rm -rf ~redmine/.bundle; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark; find /usr/local -type f -executable -exec ldd '{}' ';' | awk '/=>/ { print $(NF-1) }' | sort -u | grep -v '^/usr/local/' | xargs -r dpkg-query --search | cut -d: -f1 | sort -u | xargs -r apt-mark manual ; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false" shape="box"];
  "sha256:c7484879d680cda5faeed7a15def6ffbf78bf4824632ccb7e3e1dc3245afb821" [label="copy{src=/themes.tar.gz, dest=/usr/src/redmine/public/}" shape="note"];
  "sha256:bf649cfdcb6c27ccf66a415cabdc043e4abe872c00457d6c88ae2c1c29aa7bf5" [label="/bin/sh -c cd /usr/src/redmine/public/themes && wget https://github.com/mrliptontea/PurpleMine2/archive/v2.5.0.zip && wget https://github.com/akabekobeko/redmine-theme-minimalflat2/archive/v1.6.0.zip && unzip v2.5.0.zip && unzip v1.6.0.zip && rm v1.6.0.zip v2.5.0.zip && cd /usr/src/redmine/public/themes/PurpleMine2-2.5.0/stylesheets && sed -i s/36266b/438972/g *.css && sed -i s/614ba6/11aa87/g *.css && cd /usr/src/redmine/public/ && tar xvpf themes.tar.gz && rm themes.tar.gz" shape="box"];
  "sha256:1fbfa8b0aad3178b71addfe6b302268e754915a580e98cff96760b7f959b3c1f" [label="copy{src=/docker-entrypoint.sh, dest=/}" shape="note"];
  "sha256:e3082359a7a2976ff162534245cfeba6bd9058e16f0ba8c731364b5acc8a608e" [label="sha256:e3082359a7a2976ff162534245cfeba6bd9058e16f0ba8c731364b5acc8a608e" shape="plaintext"];
  "sha256:aa7fb7ca525aa22fb522c7b16051d105e47b0ee9b70b09c38a60b3b07b97ca12" -> "sha256:bc25495b61298a8a845fa859f2e970462e3d07b45e099519cd095c78c12aebd4" [label=""];
  "sha256:bc25495b61298a8a845fa859f2e970462e3d07b45e099519cd095c78c12aebd4" -> "sha256:384432f5451c37632f6e31c1bc3d925aca708c72cb10b4921b40cbedf6e5c7bc" [label=""];
  "sha256:384432f5451c37632f6e31c1bc3d925aca708c72cb10b4921b40cbedf6e5c7bc" -> "sha256:ff4fa0c93520da8bfd3c53a9cda05b9994f2d873758db992efc4c8e9eb846494" [label=""];
  "sha256:ff4fa0c93520da8bfd3c53a9cda05b9994f2d873758db992efc4c8e9eb846494" -> "sha256:122ce384238776675aea878b70957225fe43430143fa7c8962a6a8fc92224842" [label=""];
  "sha256:122ce384238776675aea878b70957225fe43430143fa7c8962a6a8fc92224842" -> "sha256:5fdf707ef119a755f627e82cf626b699086c99a1dadfefd048c9136975f06ff3" [label=""];
  "sha256:5fdf707ef119a755f627e82cf626b699086c99a1dadfefd048c9136975f06ff3" -> "sha256:bf2a4c01d4cb9bdf1df8a7f7d052728342439e0c17dc2a73353959bb2b133925" [label=""];
  "sha256:bf2a4c01d4cb9bdf1df8a7f7d052728342439e0c17dc2a73353959bb2b133925" -> "sha256:bd9dd3a565dd9ca318c0725cf07942d0c648e46380aacef4a8e17ab023b0e65f" [label=""];
  "sha256:bd9dd3a565dd9ca318c0725cf07942d0c648e46380aacef4a8e17ab023b0e65f" -> "sha256:c7484879d680cda5faeed7a15def6ffbf78bf4824632ccb7e3e1dc3245afb821" [label=""];
  "sha256:bf062c07f19cab7122023d3bbb4200ec20f62dc667f5027e7f14c559790c6b4e" -> "sha256:c7484879d680cda5faeed7a15def6ffbf78bf4824632ccb7e3e1dc3245afb821" [label=""];
  "sha256:c7484879d680cda5faeed7a15def6ffbf78bf4824632ccb7e3e1dc3245afb821" -> "sha256:bf649cfdcb6c27ccf66a415cabdc043e4abe872c00457d6c88ae2c1c29aa7bf5" [label=""];
  "sha256:bf649cfdcb6c27ccf66a415cabdc043e4abe872c00457d6c88ae2c1c29aa7bf5" -> "sha256:1fbfa8b0aad3178b71addfe6b302268e754915a580e98cff96760b7f959b3c1f" [label=""];
  "sha256:bf062c07f19cab7122023d3bbb4200ec20f62dc667f5027e7f14c559790c6b4e" -> "sha256:1fbfa8b0aad3178b71addfe6b302268e754915a580e98cff96760b7f959b3c1f" [label=""];
  "sha256:1fbfa8b0aad3178b71addfe6b302268e754915a580e98cff96760b7f959b3c1f" -> "sha256:e3082359a7a2976ff162534245cfeba6bd9058e16f0ba8c731364b5acc8a608e" [label=""];
}

